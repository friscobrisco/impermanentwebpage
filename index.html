<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Impermanent Leaderboard</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<style>
/* === RESET === */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  scroll-behavior: smooth;
}

/* === DESIGN TOKENS — WHITE + VIOLET === */
:root, [data-theme="light"] {
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --color-bg: #FFFFFF;
  --color-surface: #F8F6FC;
  --color-surface-2: #F3F0FA;
  --color-surface-offset: #EAE5F5;
  --color-divider: rgba(88, 50, 168, 0.10);
  --color-border: rgba(88, 50, 168, 0.12);
  --color-text: #1E1333;
  --color-text-muted: #4A3D6B;
  --color-text-faint: #7C6BAF;
  --color-primary: #7C4DFF;
  --color-primary-hover: #5E35B1;
  --color-primary-active: #4527A0;
  --color-dark-navy: #1A0E33;
  --color-light-accent: #EDE7F6;
  --shadow-sm: 0 1px 3px rgba(88,50,168,0.06);
  --shadow-md: 0 4px 12px rgba(88,50,168,0.10);
  --transition-interactive: 180ms cubic-bezier(0.16, 1, 0.3, 1);
  --table-row-alt: rgba(124, 77, 255, 0.03);
  --table-best: rgba(124, 77, 255, 0.10);
}

[data-theme="dark"] {
  --color-bg: #110D1E;
  --color-surface: #1A1330;
  --color-surface-2: #231A40;
  --color-surface-offset: #2E2250;
  --color-divider: rgba(206, 190, 255, 0.10);
  --color-border: rgba(206, 190, 255, 0.12);
  --color-text: #E8E0F7;
  --color-text-muted: #CEBEFF;
  --color-text-faint: #9E8CCC;
  --color-primary: #B388FF;
  --color-primary-hover: #D1B3FF;
  --color-primary-active: #E8E0F7;
  --color-light-accent: #2E2250;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.30);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.40);
  --table-row-alt: rgba(179, 136, 255, 0.04);
  --table-best: rgba(179, 136, 255, 0.15);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --color-bg: #110D1E; --color-surface: #1A1330; --color-surface-2: #231A40;
    --color-surface-offset: #2E2250; --color-divider: rgba(206,190,255,0.10);
    --color-border: rgba(206,190,255,0.12); --color-text: #E8E0F7;
    --color-text-muted: #CEBEFF; --color-text-faint: #9E8CCC;
    --color-primary: #B388FF; --color-primary-hover: #D1B3FF;
    --color-primary-active: #E8E0F7; --color-light-accent: #2E2250;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.30); --shadow-md: 0 4px 12px rgba(0,0,0,0.40);
    --table-row-alt: rgba(179,136,255,0.04); --table-best: rgba(179,136,255,0.15);
  }
}

body {
  font-family: var(--font-body);
  background: var(--color-bg);
  color: var(--color-text);
  line-height: 1.6;
  font-size: 14px;
  min-height: 100dvh;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px 80px;
}

/* === HEADER === */
.header {
  padding: 40px 0 28px;
  border-bottom: 1px solid var(--color-divider);
  margin-bottom: 32px;
}
.header-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.header-logo {
  height: 28px;
  width: auto;
}
.header-logo.logo-dark { display: block; }
.header-logo.logo-light { display: none; }
[data-theme="dark"] .header-logo.logo-dark { display: none; }
[data-theme="dark"] .header-logo.logo-light { display: block; }
.header-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}
.header-content {
  text-align: left;
}
.header-content h1 {
  font-size: 32px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1.15;
  letter-spacing: -0.02em;
}
.header-content p {
  font-size: 14px;
  color: var(--color-text-muted);
  margin-top: 6px;
}
.header-meta {
  display: flex;
  gap: 20px;
  margin-top: 14px;
}
.meta-tag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-faint);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 20px;
  padding: 5px 12px;
}
.meta-tag svg {
  flex-shrink: 0;
}
.meta-tag strong {
  color: var(--color-text-muted);
  font-weight: 600;
}

/* === DATA SNAPSHOT BANNER === */
.snapshot-banner {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 12px 20px;
  margin-bottom: 24px;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 13px;
  color: var(--color-text-muted);
}
.snapshot-banner svg {
  color: var(--color-primary);
  flex-shrink: 0;
}
.snapshot-link {
  color: var(--color-primary);
  font-weight: 600;
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: border-color var(--transition-interactive);
}
.snapshot-link:hover {
  border-bottom-color: var(--color-primary);
}

/* === FOOTER === */
.footer {
  margin-top: 60px;
  padding: 24px 0;
  border-top: 1px solid var(--color-divider);
  text-align: center;
}
.footer p {
  font-size: 12px;
  color: var(--color-text-faint);
  line-height: 1.6;
}
.footer .footer-update {
  font-size: 13px;
  color: var(--color-text-muted);
  margin-bottom: 8px;
}
.header-left h1 {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1.15;
  letter-spacing: -0.02em;
}
.header-left p {
  font-size: 14px;
  color: var(--color-text-muted);
  margin-top: 4px;
  max-width: 100%;
}
.theme-toggle {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 8px;
  cursor: pointer;
  color: var(--color-text);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background var(--transition-interactive);
  flex-shrink: 0;
  margin-top: 4px;
}
.theme-toggle:hover { background: var(--color-surface-offset); }

/* === SUMMARY CARDS === */
.summary-row {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  margin-bottom: 40px;
}
.summary-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 24px;
  box-shadow: var(--shadow-sm);
  text-align: center;
  transition: box-shadow var(--transition-interactive);
}
.summary-card:hover { box-shadow: var(--shadow-md); }
.summary-card .medal { font-size: 32px; line-height: 1; }
.summary-card .model-name {
  font-size: 18px;
  font-weight: 600;
  margin-top: 8px;
  color: var(--color-text);
}
.summary-card .metrics {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-top: 16px;
}
.summary-card .metric-box {
  background: var(--color-bg);
  border-radius: 8px;
  padding: 8px 12px;
}
.summary-card .metric-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--color-text-faint);
}
.summary-card .metric-value {
  font-size: 18px;
  font-weight: 700;
  font-variant-numeric: tabular-nums;
  color: var(--color-text);
  margin-top: 2px;
}

/* === SECTION TITLES === */
.section-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 4px;
}
.section-subtitle {
  font-size: 13px;
  color: var(--color-text-muted);
  margin-bottom: 16px;
  line-height: 1.5;
}

/* === CONTROLS === */
.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 24px;
  align-items: center;
}
.control-group {
  display: flex;
  align-items: center;
  gap: 8px;
}
.control-label {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--color-text-faint);
  white-space: nowrap;
}
.pill-group {
  display: flex;
  gap: 4px;
}
.pill {
  padding: 6px 14px;
  border-radius: 9999px;
  font-size: 13px;
  font-weight: 500;
  border: 1px solid var(--color-border);
  background: transparent;
  color: var(--color-text-muted);
  cursor: pointer;
  transition: all var(--transition-interactive);
  white-space: nowrap;
}
.pill:hover { background: var(--color-surface); }
.pill.active {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}
select.control-select {
  padding: 6px 32px 6px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%237C4DFF' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  transition: border-color var(--transition-interactive);
}
select.control-select:hover { border-color: var(--color-primary); }
select.control-select:focus { outline: 2px solid var(--color-primary); outline-offset: 2px; }

/* === CHART SECTION === */
.chart-wrapper {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 24px;
  box-shadow: var(--shadow-sm);
  margin-bottom: 40px;
  position: relative;
}
.chart-container {
  position: relative;
  width: 100%;
  height: 420px;
}
.chart-note {
  font-size: 12px;
  color: var(--color-text-faint);
  margin-top: 12px;
  text-align: center;
}

/* === TABLE === */
.table-wrapper {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: var(--shadow-sm);
}
.table-header-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid var(--color-divider);
}
.table-scroll {
  overflow-x: auto;
  overscroll-behavior-x: contain;
}
table {
  border-collapse: collapse;
  width: 100%;
  font-variant-numeric: tabular-nums lining-nums;
}
thead th {
  position: sticky;
  top: 0;
  background: var(--color-surface);
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--color-text-faint);
  padding: 12px 16px;
  text-align: right;
  border-bottom: 1px solid var(--color-divider);
  white-space: nowrap;
  cursor: pointer;
  user-select: none;
  transition: color var(--transition-interactive);
}
thead th:hover { color: var(--color-primary); }
thead th:first-child { text-align: left; }
thead th .sort-arrow {
  display: inline-block;
  margin-left: 4px;
  opacity: 0.4;
  font-size: 10px;
}
thead th.sorted .sort-arrow { opacity: 1; color: var(--color-primary); }
tbody td {
  padding: 10px 16px;
  font-size: 13px;
  text-align: right;
  border-bottom: 1px solid var(--color-divider);
  color: var(--color-text-muted);
}
tbody td:first-child {
  text-align: left;
  font-weight: 600;
  color: var(--color-text);
  white-space: nowrap;
}
tbody tr:nth-child(even) { background: var(--table-row-alt); }
tbody tr:hover { background: rgba(124, 77, 255, 0.06); }
td.best-value {
  background: var(--table-best);
  color: var(--color-text);
  font-weight: 600;
}

/* === CHAMPIONSHIP STANDINGS TABLE === */
.standings-section {
  margin-bottom: 40px;
}
.standings-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: var(--shadow-sm);
  overflow: hidden;
}
.standings-table {
  border-collapse: collapse;
  width: 100%;
  font-variant-numeric: tabular-nums lining-nums;
}
.standings-table thead th {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--color-text-faint);
  padding: 14px 16px;
  text-align: left;
  border-bottom: 1px solid var(--color-divider);
  white-space: nowrap;
}
.standings-table thead th:nth-child(n+3) {
  text-align: right;
}
.standings-table tbody td {
  padding: 12px 16px;
  font-size: 13px;
  border-bottom: 1px solid var(--color-divider);
  color: var(--color-text-muted);
}
.standings-table tbody td:first-child {
  font-weight: 700;
  font-size: 15px;
  color: var(--color-text-faint);
  text-align: center;
  width: 48px;
}
.standings-table tbody td:nth-child(2) {
  font-weight: 600;
  color: var(--color-text);
  white-space: nowrap;
}
.standings-table tbody td:nth-child(n+3) {
  text-align: right;
}
.standings-table tbody tr:nth-child(even) {
  background: var(--table-row-alt);
}
.standings-table tbody tr:hover {
  background: rgba(124, 77, 255, 0.06);
}
.standings-table .rank-medal {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  font-size: 14px;
  font-weight: 700;
}
.standings-table .rank-1 .rank-medal {
  background: linear-gradient(135deg, #FFD700, #FFA000);
  color: #5D4037;
}
.standings-table .rank-2 .rank-medal {
  background: linear-gradient(135deg, #E0E0E0, #9E9E9E);
  color: #37474F;
}
.standings-table .rank-3 .rank-medal {
  background: linear-gradient(135deg, #FFAB40, #E65100);
  color: #3E2723;
}
.standings-table .pts-bar-cell {
  width: 200px;
  min-width: 140px;
}
.pts-bar-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
}
.pts-bar-track {
  flex: 1;
  height: 8px;
  background: var(--color-surface-offset);
  border-radius: 4px;
  overflow: hidden;
}
.pts-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 400ms cubic-bezier(0.16, 1, 0.3, 1);
}
.pts-bar-value {
  font-size: 14px;
  font-weight: 700;
  font-variant-numeric: tabular-nums;
  color: var(--color-text);
  min-width: 36px;
  text-align: right;
}
.standings-table .trend-cell {
  font-size: 12px;
  font-weight: 600;
}
.trend-up { color: #2E7D32; }
.trend-down { color: #C62828; }
.trend-flat { color: var(--color-text-faint); }
[data-theme="dark"] .trend-up { color: #81C784; }
[data-theme="dark"] .trend-down { color: #EF9A9A; }

/* === HEATMAP === */
.heatmap-wrapper {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: var(--shadow-sm);
  margin-bottom: 40px;
  overflow: hidden;
}
.heatmap-scroll {
  overflow-x: auto;
  overscroll-behavior-x: contain;
  padding: 4px;
}
.heatmap-table {
  border-collapse: separate;
  border-spacing: 3px;
  width: 100%;
  font-variant-numeric: tabular-nums lining-nums;
}
.heatmap-table th {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  color: var(--color-text-faint);
  padding: 8px 10px;
  white-space: nowrap;
  text-align: center;
}
.heatmap-table th:first-child {
  text-align: left;
  min-width: 140px;
  position: sticky;
  left: 0;
  background: var(--color-surface);
  z-index: 2;
}
.heatmap-table td {
  padding: 10px 8px;
  text-align: center;
  font-size: 12px;
  font-weight: 600;
  border-radius: 6px;
  white-space: nowrap;
  transition: transform 120ms ease;
  min-width: 56px;
}
.heatmap-table td:first-child {
  text-align: left;
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  background: transparent !important;
  position: sticky;
  left: 0;
  z-index: 2;
  padding-left: 10px;
}
[data-theme="light"] .heatmap-table th:first-child,
[data-theme="light"] .heatmap-table td:first-child {
  background: var(--color-surface) !important;
}
[data-theme="dark"] .heatmap-table th:first-child,
[data-theme="dark"] .heatmap-table td:first-child {
  background: var(--color-surface) !important;
}
.heatmap-table td:hover:not(:first-child) {
  transform: scale(1.08);
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}
.heatmap-table .model-rank-cell {
  color: white;
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

/* === RESPONSIVE === */
@media (max-width: 768px) {
  .header { padding: 24px 0 20px; }
  .header-logo { height: 24px; }
  .header-content h1 { font-size: 24px; }
  .header-meta { flex-direction: column; gap: 8px; }
  .snapshot-banner { flex-direction: column; text-align: center; gap: 8px; }
  .summary-row { grid-template-columns: 1fr; }
  .controls { gap: 8px; }
  .control-group { flex-wrap: wrap; }
  .chart-container { height: 300px; }
  .container { padding: 0 16px 60px; }
  .summary-card { padding: 16px; }
  .summary-card .model-name { font-size: 16px; }
  .pill { padding: 5px 10px; font-size: 12px; }
}

@media (max-width: 480px) {
  .pill-group { flex-wrap: wrap; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus */
:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-radius: 4px;
}
</style>
</head>
<body>
<div class="container">

  <!-- HEADER -->
  <header class="header">
    <div class="header-top">
      <div>
        <img src="tc.png" alt="TimeCopilot" class="header-logo logo-dark">
        <img src="tcwh.png" alt="TimeCopilot" class="header-logo logo-light">
      </div>
      <div class="header-actions">
        <button class="theme-toggle" data-theme-toggle aria-label="Switch to dark mode">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
      </div>
    </div>
    <div class="header-content">
      <h1>Impermanent Leaderboard</h1>
      <p>Live time-series forecasting benchmark on GitHub activity signals</p>
      <div class="header-meta">
        <span class="meta-tag">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
          Updated weekly
        </span>
        <span class="meta-tag">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
          Last updated <strong id="lastUpdated">—</strong>
        </span>
      </div>
    </div>
  </header>

  <!-- SNAPSHOT BANNER -->
  <div class="snapshot-banner">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
    <span>Showing a <strong>3-month rolling snapshot</strong> of model performance across 4 GitHub activity datasets and 4 time frequencies. For access to historical data, <a href="https://form.typeform.com/to/PYKVUpaL" target="_blank" rel="noopener noreferrer" class="snapshot-link">contact us</a>.</span>
  </div>

  <!-- SUMMARY CARDS -->
  <div class="summary-row" id="summaryCards"></div>

  <!-- CHART SECTION -->
  <h2 class="section-title">Model Performance Over Time</h2>

  <div class="controls" id="chartControls">
    <div class="control-group">
      <span class="control-label">Metric</span>
      <div class="pill-group" id="metricToggle">
        <button class="pill active" data-value="mase">MASE</button>
        <button class="pill" data-value="crps">SCALED_CRPS</button>
      </div>
    </div>
    <div class="control-group">
      <span class="control-label">View</span>
      <div class="pill-group" id="viewToggle">
        <button class="pill active" data-value="rank">Avg Rank</button>
        <button class="pill" data-value="raw">Raw Value</button>
      </div>
    </div>
    <div class="control-group">
      <span class="control-label">Dataset</span>
      <select class="control-select" id="subdatasetFilter">
        <option value="all">All Datasets</option>
        <option value="issues_opened">issues_opened</option>
        <option value="prs_opened">prs_opened</option>
        <option value="pushes">pushes</option>
        <option value="stars">stars</option>
      </select>
    </div>
    <div class="control-group">
      <span class="control-label">Frequency</span>
      <select class="control-select" id="frequencyFilter">
        <option value="all">All Frequencies</option>
        <option value="daily">daily</option>
        <option value="hourly">hourly</option>
        <option value="monthly">monthly</option>
        <option value="weekly">weekly</option>
      </select>
    </div>
  </div>

  <div class="chart-wrapper">
    <div class="chart-container">
      <canvas id="mainChart"></canvas>
    </div>
    <p class="chart-note" id="chartNote">Click legend items to show/hide models. Hover for details.</p>
  </div>

  <!-- CHAMPIONSHIP POINTS CHART -->
  <h2 class="section-title">Championship Points Race</h2>
  <p class="section-subtitle">Points awarded per week: 12 pts for 1st, 11 for 2nd, ... 1 for 12th. Cumulative total shows who leads the overall race.</p>
  <div class="controls" id="champControls">
    <div class="control-group">
      <span class="control-label">Metric</span>
      <div class="pill-group" id="champMetricToggle">
        <button class="pill active" data-value="mase">MASE</button>
        <button class="pill" data-value="crps">SCALED_CRPS</button>
      </div>
    </div>
  </div>
  <div class="chart-wrapper">
    <div class="chart-container">
      <canvas id="champChart"></canvas>
    </div>
    <p class="chart-note">Steeper lines = faster point accumulation = more consistent top finishes.</p>
  </div>

  <!-- CHAMPIONSHIP STANDINGS TABLE -->
  <div class="standings-section">
    <h2 class="section-title">Championship Standings</h2>
    <p class="section-subtitle">Final leaderboard based on cumulative championship points. Points bar shows relative standing.</p>
    <div class="standings-card">
      <table class="standings-table" id="standingsTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Model</th>
            <th>Total Pts</th>
            <th>Avg Rank</th>
            <th>Best Wk</th>
            <th>Worst Wk</th>
            <th class="pts-bar-cell">Points</th>
          </tr>
        </thead>
        <tbody id="standingsBody"></tbody>
      </table>
    </div>
  </div>

  <!-- RANK HEATMAP -->
  <h2 class="section-title">Rank Stability Heatmap</h2>
  <p class="section-subtitle">Average rank per model per week. Deeper violet = better rank. Spot consistency vs. volatility at a glance.</p>
  <div class="controls" id="heatmapControls">
    <div class="control-group">
      <span class="control-label">Metric</span>
      <div class="pill-group" id="heatmapMetricToggle">
        <button class="pill active" data-value="mase">MASE</button>
        <button class="pill" data-value="crps">SCALED_CRPS</button>
      </div>
    </div>
  </div>
  <div class="heatmap-wrapper" id="heatmapWrapper">
    <div class="heatmap-scroll">
      <table class="heatmap-table" id="heatmapTable"></table>
    </div>
  </div>

  <!-- TABLE SECTION -->
  <div class="table-wrapper">
    <div class="table-header-bar">
      <h2 class="section-title" style="margin-bottom:0">Detailed Results</h2>
      <div class="control-group">
        <span class="control-label" style="font-size:11px">Latest cutoff per filter</span>
      </div>
    </div>
    <div class="table-scroll">
      <table id="resultsTable">
        <thead id="tableHead"></thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    <p class="footer-update">This leaderboard is updated automatically every week.</p>
    <p>&copy; 2026 Out of the Blue Labs, Inc. All rights reserved.</p>
  </footer>

</div>

<script>
// ===========================================================================
// DATA (embedded)
// ===========================================================================
const DATA = {"models":["AutoARIMA","AutoCES","AutoETS","Chronos","DynamicOptimizedTheta","HistoricAverage","Moirai","Prophet","SeasonalNaive","TiRex","TimesFM","ZeroModel"],"cutoffs":["2025-12-01-00","2026-01-04-00","2026-01-11-00","2026-01-18-00","2026-01-25-00","2026-02-01-00","2026-02-08-00","2026-02-09-00","2026-02-10-00","2026-02-11-00","2026-02-12-00"],"subdatasets":["issues_opened","prs_opened","pushes","stars"],"frequencies":["daily","hourly","monthly","weekly"],"mase":[{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-01-04-00","values":{"AutoARIMA":0.426,"AutoCES":0.323,"AutoETS":0.403,"Chronos":0.167,"DynamicOptimizedTheta":0.323,"HistoricAverage":0.794,"Moirai":0.163,"Prophet":0.471,"SeasonalNaive":0.173,"TiRex":0.159,"TimesFM":0.14,"ZeroModel":0.099}},{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-01-11-00","values":{"AutoARIMA":0.432,"AutoCES":0.313,"AutoETS":0.4,"Chronos":0.135,"DynamicOptimizedTheta":0.316,"HistoricAverage":0.778,"Moirai":0.124,"Prophet":0.457,"SeasonalNaive":0.126,"TiRex":0.121,"TimesFM":0.116,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-01-18-00","values":{"AutoARIMA":0.405,"AutoCES":0.319,"AutoETS":0.399,"Chronos":0.033,"DynamicOptimizedTheta":0.319,"HistoricAverage":0.772,"Moirai":0.024,"Prophet":0.457,"SeasonalNaive":0.0,"TiRex":0.014,"TimesFM":0.023,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-01-25-00","values":{"AutoARIMA":0.398,"AutoCES":0.304,"AutoETS":0.368,"Chronos":0.03,"DynamicOptimizedTheta":0.272,"HistoricAverage":0.782,"Moirai":0.03,"Prophet":0.462,"SeasonalNaive":0.0,"TiRex":0.02,"TimesFM":0.025,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-02-01-00","values":{"AutoARIMA":0.395,"AutoCES":0.298,"AutoETS":0.373,"Chronos":0.026,"DynamicOptimizedTheta":0.271,"HistoricAverage":0.777,"Moirai":0.022,"Prophet":0.449,"SeasonalNaive":0.0,"TiRex":0.015,"TimesFM":0.014,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-08-00","values":{"AutoARIMA":0.5,"AutoCES":0.774,"AutoETS":0.5,"Chronos":0.011,"DynamicOptimizedTheta":0.009,"HistoricAverage":0.5,"Moirai":0.018,"Prophet":1.066,"SeasonalNaive":0.0,"TiRex":0.009,"TimesFM":0.009,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-09-00","values":{"AutoARIMA":0.5,"AutoCES":0.792,"AutoETS":0.5,"Chronos":0.011,"DynamicOptimizedTheta":0.005,"HistoricAverage":0.5,"Moirai":0.02,"Prophet":0.965,"SeasonalNaive":0.0,"TiRex":0.01,"TimesFM":0.009,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-10-00","values":{"AutoARIMA":0.5,"AutoCES":0.776,"AutoETS":0.5,"Chronos":0.019,"DynamicOptimizedTheta":0.025,"HistoricAverage":0.5,"Moirai":0.024,"Prophet":1.05,"SeasonalNaive":0.0,"TiRex":0.014,"TimesFM":0.01,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-11-00","values":{"AutoARIMA":0.5,"AutoCES":0.742,"AutoETS":0.5,"Chronos":0.012,"DynamicOptimizedTheta":0.025,"HistoricAverage":0.5,"Moirai":0.019,"Prophet":1.01,"SeasonalNaive":0.0,"TiRex":0.009,"TimesFM":0.01,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-12-00","values":{"AutoARIMA":0.5,"AutoCES":0.627,"AutoETS":0.5,"Chronos":0.008,"DynamicOptimizedTheta":0.002,"HistoricAverage":0.5,"Moirai":0.015,"Prophet":0.863,"SeasonalNaive":0.0,"TiRex":0.006,"TimesFM":0.005,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"monthly","cutoff":"2025-12-01-00","values":{"AutoARIMA":0.375,"AutoCES":0.518,"AutoETS":0.449,"Chronos":0.285,"DynamicOptimizedTheta":0.379,"HistoricAverage":1.23,"Moirai":0.251,"Prophet":0.713,"SeasonalNaive":1.643,"TiRex":0.261,"TimesFM":0.269,"ZeroModel":0.434}},{"subdataset":"issues_opened","frequency":"weekly","cutoff":"2026-01-04-00","values":{"AutoARIMA":0.377,"AutoCES":0.313,"AutoETS":0.342,"Chronos":0.193,"DynamicOptimizedTheta":0.285,"HistoricAverage":1.034,"Moirai":0.194,"Prophet":0.726,"SeasonalNaive":0.198,"TiRex":0.204,"TimesFM":0.211,"ZeroModel":0.141}},{"subdataset":"issues_opened","frequency":"weekly","cutoff":"2026-01-11-00","values":{"AutoARIMA":0.333,"AutoCES":0.259,"AutoETS":0.304,"Chronos":0.135,"DynamicOptimizedTheta":0.226,"HistoricAverage":1.058,"Moirai":0.144,"Prophet":0.717,"SeasonalNaive":0.18,"TiRex":0.142,"TimesFM":0.149,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"weekly","cutoff":"2026-01-18-00","values":{"AutoARIMA":0.343,"AutoCES":0.262,"AutoETS":0.291,"Chronos":0.118,"DynamicOptimizedTheta":0.225,"HistoricAverage":1.09,"Moirai":0.144,"Prophet":0.713,"SeasonalNaive":0.0,"TiRex":0.14,"TimesFM":0.153,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"weekly","cutoff":"2026-01-25-00","values":{"AutoARIMA":0.341,"AutoCES":0.266,"AutoETS":0.308,"Chronos":0.144,"DynamicOptimizedTheta":0.25,"HistoricAverage":1.085,"Moirai":0.158,"Prophet":0.724,"SeasonalNaive":0.157,"TiRex":0.16,"TimesFM":0.184,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-01-04-00","values":{"AutoARIMA":0.499,"AutoCES":0.417,"AutoETS":0.497,"Chronos":0.196,"DynamicOptimizedTheta":0.373,"HistoricAverage":0.749,"Moirai":0.183,"Prophet":0.537,"SeasonalNaive":0.23,"TiRex":0.188,"TimesFM":0.17,"ZeroModel":0.152}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-01-11-00","values":{"AutoARIMA":0.499,"AutoCES":0.438,"AutoETS":0.5,"Chronos":0.209,"DynamicOptimizedTheta":0.437,"HistoricAverage":0.739,"Moirai":0.199,"Prophet":0.558,"SeasonalNaive":0.186,"TiRex":0.193,"TimesFM":0.2,"ZeroModel":0.142}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-01-18-00","values":{"AutoARIMA":0.498,"AutoCES":0.387,"AutoETS":0.493,"Chronos":0.158,"DynamicOptimizedTheta":0.388,"HistoricAverage":0.741,"Moirai":0.133,"Prophet":0.545,"SeasonalNaive":0.14,"TiRex":0.143,"TimesFM":0.144,"ZeroModel":0.08}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-01-25-00","values":{"AutoARIMA":0.499,"AutoCES":0.384,"AutoETS":0.497,"Chronos":0.138,"DynamicOptimizedTheta":0.384,"HistoricAverage":0.731,"Moirai":0.141,"Prophet":0.528,"SeasonalNaive":0.161,"TiRex":0.143,"TimesFM":0.156,"ZeroModel":0.122}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-02-01-00","values":{"AutoARIMA":0.499,"AutoCES":0.388,"AutoETS":0.5,"Chronos":0.042,"DynamicOptimizedTheta":0.364,"HistoricAverage":0.744,"Moirai":0.027,"Prophet":0.516,"SeasonalNaive":0.0,"TiRex":0.024,"TimesFM":0.046,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-08-00","values":{"AutoARIMA":0.5,"AutoCES":0.785,"AutoETS":0.501,"Chronos":0.102,"DynamicOptimizedTheta":0.06,"HistoricAverage":0.517,"Moirai":0.134,"Prophet":0.93,"SeasonalNaive":0.0,"TiRex":0.072,"TimesFM":0.011,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-09-00","values":{"AutoARIMA":0.531,"AutoCES":0.824,"AutoETS":0.514,"Chronos":0.408,"DynamicOptimizedTheta":0.115,"HistoricAverage":0.533,"Moirai":0.41,"Prophet":1.058,"SeasonalNaive":0.0,"TiRex":0.395,"TimesFM":0.013,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-10-00","values":{"AutoARIMA":0.527,"AutoCES":0.88,"AutoETS":0.527,"Chronos":0.459,"DynamicOptimizedTheta":0.467,"HistoricAverage":0.531,"Moirai":0.477,"Prophet":1.13,"SeasonalNaive":0.0,"TiRex":0.476,"TimesFM":0.012,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-11-00","values":{"AutoARIMA":0.542,"AutoCES":0.94,"AutoETS":0.525,"Chronos":0.494,"DynamicOptimizedTheta":0.512,"HistoricAverage":0.544,"Moirai":0.508,"Prophet":1.183,"SeasonalNaive":0.185,"TiRex":0.495,"TimesFM":0.012,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-12-00","values":{"AutoARIMA":0.5,"AutoCES":0.548,"AutoETS":0.5,"Chronos":0.011,"DynamicOptimizedTheta":0.113,"HistoricAverage":0.5,"Moirai":0.018,"Prophet":0.84,"SeasonalNaive":0.0,"TiRex":0.007,"TimesFM":0.006,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"monthly","cutoff":"2025-12-01-00","values":{"AutoARIMA":0.558,"AutoCES":0.596,"AutoETS":0.509,"Chronos":0.277,"DynamicOptimizedTheta":0.402,"HistoricAverage":0.982,"Moirai":0.242,"Prophet":0.817,"SeasonalNaive":1.369,"TiRex":0.298,"TimesFM":0.314,"ZeroModel":0.548}},{"subdataset":"prs_opened","frequency":"weekly","cutoff":"2026-01-04-00","values":{"AutoARIMA":0.478,"AutoCES":0.361,"AutoETS":0.406,"Chronos":0.158,"DynamicOptimizedTheta":0.304,"HistoricAverage":0.908,"Moirai":0.174,"Prophet":0.749,"SeasonalNaive":0.3,"TiRex":0.163,"TimesFM":0.186,"ZeroModel":0.219}},{"subdataset":"prs_opened","frequency":"weekly","cutoff":"2026-01-11-00","values":{"AutoARIMA":0.471,"AutoCES":0.338,"AutoETS":0.392,"Chronos":0.159,"DynamicOptimizedTheta":0.317,"HistoricAverage":0.883,"Moirai":0.159,"Prophet":0.754,"SeasonalNaive":0.164,"TiRex":0.164,"TimesFM":0.18,"ZeroModel":0.206}},{"subdataset":"prs_opened","frequency":"weekly","cutoff":"2026-01-18-00","values":{"AutoARIMA":0.42,"AutoCES":0.303,"AutoETS":0.35,"Chronos":0.116,"DynamicOptimizedTheta":0.29,"HistoricAverage":0.9,"Moirai":0.138,"Prophet":0.803,"SeasonalNaive":0.141,"TiRex":0.151,"TimesFM":0.192,"ZeroModel":0.135}},{"subdataset":"prs_opened","frequency":"weekly","cutoff":"2026-01-25-00","values":{"AutoARIMA":0.416,"AutoCES":0.309,"AutoETS":0.376,"Chronos":0.155,"DynamicOptimizedTheta":0.299,"HistoricAverage":0.925,"Moirai":0.127,"Prophet":0.76,"SeasonalNaive":0.113,"TiRex":0.158,"TimesFM":0.195,"ZeroModel":0.192}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-01-04-00","values":{"AutoARIMA":0.499,"AutoCES":0.353,"AutoETS":0.498,"Chronos":0.212,"DynamicOptimizedTheta":0.335,"HistoricAverage":0.791,"Moirai":0.211,"Prophet":0.591,"SeasonalNaive":0.232,"TiRex":0.202,"TimesFM":0.201,"ZeroModel":0.157}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-01-11-00","values":{"AutoARIMA":0.488,"AutoCES":0.345,"AutoETS":0.472,"Chronos":0.204,"DynamicOptimizedTheta":0.35,"HistoricAverage":0.763,"Moirai":0.198,"Prophet":0.581,"SeasonalNaive":0.208,"TiRex":0.198,"TimesFM":0.19,"ZeroModel":0.144}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-01-18-00","values":{"AutoARIMA":0.495,"AutoCES":0.33,"AutoETS":0.488,"Chronos":0.176,"DynamicOptimizedTheta":0.343,"HistoricAverage":0.766,"Moirai":0.163,"Prophet":0.569,"SeasonalNaive":0.153,"TiRex":0.154,"TimesFM":0.156,"ZeroModel":0.057}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-01-25-00","values":{"AutoARIMA":0.482,"AutoCES":0.307,"AutoETS":0.453,"Chronos":0.156,"DynamicOptimizedTheta":0.318,"HistoricAverage":0.767,"Moirai":0.154,"Prophet":0.57,"SeasonalNaive":0.138,"TiRex":0.154,"TimesFM":0.145,"ZeroModel":0.112}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-02-01-00","values":{"AutoARIMA":0.489,"AutoCES":0.361,"AutoETS":0.459,"Chronos":0.199,"DynamicOptimizedTheta":0.35,"HistoricAverage":0.753,"Moirai":0.18,"Prophet":0.55,"SeasonalNaive":0.226,"TiRex":0.206,"TimesFM":0.179,"ZeroModel":0.124}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-08-00","values":{"AutoARIMA":0.607,"AutoCES":0.86,"AutoETS":0.585,"Chronos":0.41,"DynamicOptimizedTheta":0.588,"HistoricAverage":0.672,"Moirai":0.411,"Prophet":0.982,"SeasonalNaive":0.0,"TiRex":0.396,"TimesFM":0.014,"ZeroModel":0.0}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-09-00","values":{"AutoARIMA":0.645,"AutoCES":0.98,"AutoETS":0.629,"Chronos":0.83,"DynamicOptimizedTheta":0.685,"HistoricAverage":0.722,"Moirai":0.867,"Prophet":1.102,"SeasonalNaive":0.328,"TiRex":0.845,"TimesFM":0.031,"ZeroModel":0.0}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-10-00","values":{"AutoARIMA":0.786,"AutoCES":0.994,"AutoETS":0.732,"Chronos":0.881,"DynamicOptimizedTheta":0.806,"HistoricAverage":0.789,"Moirai":0.881,"Prophet":1.197,"SeasonalNaive":0.731,"TiRex":0.878,"TimesFM":0.213,"ZeroModel":0.112}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-11-00","values":{"AutoARIMA":0.662,"AutoCES":0.996,"AutoETS":0.632,"Chronos":0.906,"DynamicOptimizedTheta":0.769,"HistoricAverage":0.735,"Moirai":0.882,"Prophet":1.154,"SeasonalNaive":0.561,"TiRex":0.917,"TimesFM":0.039,"ZeroModel":0.0}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-12-00","values":{"AutoARIMA":0.5,"AutoCES":0.603,"AutoETS":0.501,"Chronos":0.019,"DynamicOptimizedTheta":0.327,"HistoricAverage":0.608,"Moirai":0.028,"Prophet":0.9,"SeasonalNaive":0.0,"TiRex":0.011,"TimesFM":0.007,"ZeroModel":0.0}},{"subdataset":"pushes","frequency":"monthly","cutoff":"2025-12-01-00","values":{"AutoARIMA":0.436,"AutoCES":0.587,"AutoETS":0.436,"Chronos":0.254,"DynamicOptimizedTheta":0.376,"HistoricAverage":0.993,"Moirai":0.231,"Prophet":0.835,"SeasonalNaive":1.614,"TiRex":0.237,"TimesFM":0.272,"ZeroModel":0.454}},{"subdataset":"pushes","frequency":"weekly","cutoff":"2026-01-04-00","values":{"AutoARIMA":0.372,"AutoCES":0.278,"AutoETS":0.329,"Chronos":0.173,"DynamicOptimizedTheta":0.252,"HistoricAverage":0.875,"Moirai":0.17,"Prophet":0.894,"SeasonalNaive":0.2,"TiRex":0.155,"TimesFM":0.172,"ZeroModel":0.183}},{"subdataset":"pushes","frequency":"weekly","cutoff":"2026-01-11-00","values":{"AutoARIMA":0.348,"AutoCES":0.259,"AutoETS":0.325,"Chronos":0.14,"DynamicOptimizedTheta":0.245,"HistoricAverage":0.965,"Moirai":0.163,"Prophet":0.878,"SeasonalNaive":0.179,"TiRex":0.128,"TimesFM":0.149,"ZeroModel":0.167}},{"subdataset":"pushes","frequency":"weekly","cutoff":"2026-01-18-00","values":{"AutoARIMA":0.348,"AutoCES":0.25,"AutoETS":0.327,"Chronos":0.144,"DynamicOptimizedTheta":0.235,"HistoricAverage":0.974,"Moirai":0.135,"Prophet":0.907,"SeasonalNaive":0.074,"TiRex":0.14,"TimesFM":0.156,"ZeroModel":0.07}},{"subdataset":"pushes","frequency":"weekly","cutoff":"2026-01-25-00","values":{"AutoARIMA":0.348,"AutoCES":0.244,"AutoETS":0.339,"Chronos":0.139,"DynamicOptimizedTheta":0.239,"HistoricAverage":0.941,"Moirai":0.142,"Prophet":0.869,"SeasonalNaive":0.129,"TiRex":0.124,"TimesFM":0.166,"ZeroModel":0.101}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-01-04-00","values":{"AutoARIMA":0.475,"AutoCES":0.377,"AutoETS":0.393,"Chronos":0.305,"DynamicOptimizedTheta":0.388,"HistoricAverage":1.544,"Moirai":0.303,"Prophet":0.714,"SeasonalNaive":0.422,"TiRex":0.318,"TimesFM":0.299,"ZeroModel":0.788}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-01-11-00","values":{"AutoARIMA":0.476,"AutoCES":0.319,"AutoETS":0.332,"Chronos":0.303,"DynamicOptimizedTheta":0.33,"HistoricAverage":1.574,"Moirai":0.296,"Prophet":0.673,"SeasonalNaive":0.336,"TiRex":0.317,"TimesFM":0.287,"ZeroModel":0.725}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-01-18-00","values":{"AutoARIMA":0.456,"AutoCES":0.318,"AutoETS":0.351,"Chronos":0.289,"DynamicOptimizedTheta":0.35,"HistoricAverage":1.611,"Moirai":0.289,"Prophet":0.615,"SeasonalNaive":0.382,"TiRex":0.307,"TimesFM":0.288,"ZeroModel":0.684}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-01-25-00","values":{"AutoARIMA":0.471,"AutoCES":0.298,"AutoETS":0.319,"Chronos":0.282,"DynamicOptimizedTheta":0.317,"HistoricAverage":1.6,"Moirai":0.279,"Prophet":0.603,"SeasonalNaive":0.345,"TiRex":0.288,"TimesFM":0.271,"ZeroModel":0.632}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-02-01-00","values":{"AutoARIMA":0.452,"AutoCES":0.296,"AutoETS":0.311,"Chronos":0.299,"DynamicOptimizedTheta":0.302,"HistoricAverage":1.688,"Moirai":0.294,"Prophet":0.602,"SeasonalNaive":0.316,"TiRex":0.299,"TimesFM":0.286,"ZeroModel":0.589}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-08-00","values":{"AutoARIMA":0.821,"AutoCES":0.827,"AutoETS":0.814,"Chronos":0.598,"DynamicOptimizedTheta":0.839,"HistoricAverage":0.896,"Moirai":0.592,"Prophet":0.851,"SeasonalNaive":0.911,"TiRex":0.595,"TimesFM":0.596,"ZeroModel":0.6}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-09-00","values":{"AutoARIMA":0.785,"AutoCES":0.753,"AutoETS":0.738,"Chronos":0.529,"DynamicOptimizedTheta":0.793,"HistoricAverage":0.855,"Moirai":0.533,"Prophet":0.764,"SeasonalNaive":0.857,"TiRex":0.523,"TimesFM":0.523,"ZeroModel":0.533}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-10-00","values":{"AutoARIMA":0.77,"AutoCES":0.734,"AutoETS":0.734,"Chronos":0.517,"DynamicOptimizedTheta":0.709,"HistoricAverage":0.865,"Moirai":0.518,"Prophet":0.756,"SeasonalNaive":0.789,"TiRex":0.512,"TimesFM":0.511,"ZeroModel":0.523}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-11-00","values":{"AutoARIMA":0.755,"AutoCES":0.723,"AutoETS":0.74,"Chronos":0.474,"DynamicOptimizedTheta":0.704,"HistoricAverage":0.855,"Moirai":0.474,"Prophet":0.756,"SeasonalNaive":0.76,"TiRex":0.465,"TimesFM":0.472,"ZeroModel":0.469}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-12-00","values":{"AutoARIMA":0.647,"AutoCES":0.791,"AutoETS":0.647,"Chronos":0.415,"DynamicOptimizedTheta":0.734,"HistoricAverage":0.713,"Moirai":0.451,"Prophet":0.78,"SeasonalNaive":0.872,"TiRex":0.46,"TimesFM":0.454,"ZeroModel":0.446}},{"subdataset":"stars","frequency":"monthly","cutoff":"2025-12-01-00","values":{"AutoARIMA":0.451,"AutoCES":0.504,"AutoETS":0.254,"Chronos":0.157,"DynamicOptimizedTheta":0.303,"HistoricAverage":1.155,"Moirai":0.154,"Prophet":0.835,"SeasonalNaive":1.892,"TiRex":0.141,"TimesFM":0.173,"ZeroModel":0.584}},{"subdataset":"stars","frequency":"weekly","cutoff":"2026-01-04-00","values":{"AutoARIMA":0.286,"AutoCES":0.153,"AutoETS":0.175,"Chronos":0.149,"DynamicOptimizedTheta":0.154,"HistoricAverage":1.317,"Moirai":0.122,"Prophet":0.957,"SeasonalNaive":0.147,"TiRex":0.123,"TimesFM":0.126,"ZeroModel":0.657}},{"subdataset":"stars","frequency":"weekly","cutoff":"2026-01-11-00","values":{"AutoARIMA":0.36,"AutoCES":0.154,"AutoETS":0.169,"Chronos":0.117,"DynamicOptimizedTheta":0.164,"HistoricAverage":1.296,"Moirai":0.115,"Prophet":0.966,"SeasonalNaive":0.129,"TiRex":0.124,"TimesFM":0.128,"ZeroModel":0.613}},{"subdataset":"stars","frequency":"weekly","cutoff":"2026-01-18-00","values":{"AutoARIMA":0.347,"AutoCES":0.144,"AutoETS":0.157,"Chronos":0.142,"DynamicOptimizedTheta":0.161,"HistoricAverage":1.333,"Moirai":0.125,"Prophet":0.939,"SeasonalNaive":0.125,"TiRex":0.133,"TimesFM":0.132,"ZeroModel":0.569}},{"subdataset":"stars","frequency":"weekly","cutoff":"2026-01-25-00","values":{"AutoARIMA":0.295,"AutoCES":0.13,"AutoETS":0.167,"Chronos":0.132,"DynamicOptimizedTheta":0.17,"HistoricAverage":1.343,"Moirai":0.114,"Prophet":0.87,"SeasonalNaive":0.122,"TiRex":0.126,"TimesFM":0.127,"ZeroModel":0.527}}],"crps":[{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-01-04-00","values":{"AutoARIMA":3.412,"AutoCES":2.985,"AutoETS":3.457,"Chronos":35951957.333,"DynamicOptimizedTheta":3.414,"HistoricAverage":6.266,"Moirai":9209777706.044,"Prophet":7802318.573,"SeasonalNaive":8.941,"TiRex":83486012.733,"TimesFM":1.348,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-01-11-00","values":{"AutoARIMA":10.461,"AutoCES":7.358,"AutoETS":7.939,"Chronos":35951957.333,"DynamicOptimizedTheta":7.914,"HistoricAverage":9.284,"Moirai":9209777706.044,"Prophet":7912315.866,"SeasonalNaive":11.675,"TiRex":83486012.733,"TimesFM":2.644,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-01-18-00","values":{"AutoARIMA":676132613132197.0,"AutoCES":694367781240490.8,"AutoETS":720356417568848.2,"Chronos":2069088564383.288,"DynamicOptimizedTheta":704162164312107.8,"HistoricAverage":739606730328564.5,"Moirai":3781911129474.844,"Prophet":739783413583646.8,"SeasonalNaive":1939286077676658.0,"TiRex":1148483086290.489,"TimesFM":3219076692195.554,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-01-25-00","values":{"AutoARIMA":614748838865578.8,"AutoCES":605897962256247.5,"AutoETS":608562755782428.4,"Chronos":1602790079419.734,"DynamicOptimizedTheta":601692125422970.2,"HistoricAverage":615328868420084.5,"Moirai":3088145122736.356,"Prophet":617225688914664.1,"SeasonalNaive":1622764156645831.0,"TiRex":1058511677030.4,"TimesFM":2586800481166.222,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"daily","cutoff":"2026-02-01-00","values":{"AutoARIMA":772547638103586.2,"AutoCES":727106752904787.2,"AutoETS":790903303742821.8,"Chronos":2800266481208.888,"DynamicOptimizedTheta":783698070071619.5,"HistoricAverage":827827758312834.9,"Moirai":3832398665773.511,"Prophet":837918471230534.1,"SeasonalNaive":2155542865562829.0,"TiRex":1367190710954.666,"TimesFM":3052662676957.866,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-08-00","values":{"AutoARIMA":833373701896055.5,"AutoCES":1203835018323922.5,"AutoETS":846315659437306.2,"Chronos":1810320606276.266,"DynamicOptimizedTheta":900422177285734.2,"HistoricAverage":845508651044044.9,"Moirai":3121100412973.51,"Prophet":864699252545371.2,"SeasonalNaive":1192627333007496.5,"TiRex":1201945056961.422,"TimesFM":3716467117260.8,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-09-00","values":{"AutoARIMA":833373701896055.5,"AutoCES":1201379196112441.0,"AutoETS":846314183881159.0,"Chronos":1778284885151.289,"DynamicOptimizedTheta":900422177285734.2,"HistoricAverage":845508651044044.9,"Moirai":3148795652778.667,"Prophet":865173871185407.6,"SeasonalNaive":1192627333007496.5,"TiRex":1183331053294.933,"TimesFM":3524839516842.666,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-10-00","values":{"AutoARIMA":833373701896055.5,"AutoCES":1046400849511128.1,"AutoETS":846292011368812.0,"Chronos":1618986244505.6,"DynamicOptimizedTheta":900422177285734.2,"HistoricAverage":845508651044044.9,"Moirai":2890280963640.888,"Prophet":850429246089358.9,"SeasonalNaive":1192627333007496.5,"TiRex":1098691061714.489,"TimesFM":2509391603666.489,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-11-00","values":{"AutoARIMA":833373701896055.5,"AutoCES":1201442412793401.0,"AutoETS":846310386474825.9,"Chronos":1772781212649.244,"DynamicOptimizedTheta":900422177285734.2,"HistoricAverage":845508651044044.9,"Moirai":3127809510968.888,"Prophet":868046645302709.0,"SeasonalNaive":1192627333007496.5,"TiRex":1128070104860.444,"TimesFM":3366822220049.066,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"hourly","cutoff":"2026-02-12-00","values":{"AutoARIMA":147321049107660.8,"AutoCES":177693427825231.66,"AutoETS":150415033307409.06,"Chronos":371878923104.711,"DynamicOptimizedTheta":152399087927599.56,"HistoricAverage":150252941423411.2,"Moirai":699988565469.867,"Prophet":151276832078959.25,"SeasonalNaive":210828715010730.66,"TiRex":232773630907.733,"TimesFM":584556200300.089,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"monthly","cutoff":"2025-12-01-00","values":{"AutoARIMA":1.034,"AutoCES":1.431,"AutoETS":0.823,"Chronos":0.613,"DynamicOptimizedTheta":0.864,"HistoricAverage":2.22,"Moirai":0.608,"Prophet":1.764,"SeasonalNaive":2.765,"TiRex":0.64,"TimesFM":0.58,"ZeroModel":1.0}},{"subdataset":"issues_opened","frequency":"weekly","cutoff":"2026-01-04-00","values":{"AutoARIMA":2.439,"AutoCES":2.373,"AutoETS":2.526,"Chronos":6501899.378,"DynamicOptimizedTheta":2.575,"HistoricAverage":6.047,"Moirai":1403510774.756,"Prophet":1093618.238,"SeasonalNaive":2.609,"TiRex":4947013.519,"TimesFM":1.095,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"weekly","cutoff":"2026-01-11-00","values":{"AutoARIMA":5.813,"AutoCES":5.965,"AutoETS":6.243,"Chronos":6501899.378,"DynamicOptimizedTheta":6.767,"HistoricAverage":9.308,"Moirai":1403510774.756,"Prophet":1169099.485,"SeasonalNaive":7.376,"TiRex":4947013.519,"TimesFM":3.966,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"weekly","cutoff":"2026-01-18-00","values":{"AutoARIMA":343852744651571.2,"AutoCES":361392037743854.94,"AutoETS":333531616616137.25,"Chronos":3603859336214.755,"DynamicOptimizedTheta":307035927094752.0,"HistoricAverage":366555991340919.5,"Moirai":1807248837836.8,"Prophet":313231048461510.44,"SeasonalNaive":421311886480725.25,"TiRex":1683858892026.311,"TimesFM":3186950318762.666,"ZeroModel":0.0}},{"subdataset":"issues_opened","frequency":"weekly","cutoff":"2026-01-25-00","values":{"AutoARIMA":299229392593806.25,"AutoCES":305402397758441.25,"AutoETS":303887936855153.75,"Chronos":2898577984352.711,"DynamicOptimizedTheta":288359588852167.1,"HistoricAverage":317365268058385.06,"Moirai":2059105794639.644,"Prophet":302392451418829.06,"SeasonalNaive":391113958000776.5,"TiRex":1336440404195.556,"TimesFM":2104170911425.422,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-01-04-00","values":{"AutoARIMA":2.699,"AutoCES":2.645,"AutoETS":2.703,"Chronos":1.339,"DynamicOptimizedTheta":2.659,"HistoricAverage":4.526,"Moirai":1.327,"Prophet":3.699,"SeasonalNaive":6.096,"TiRex":1.457,"TimesFM":1.202,"ZeroModel":1.0}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-01-11-00","values":{"AutoARIMA":3.079,"AutoCES":2.802,"AutoETS":3.054,"Chronos":1.615,"DynamicOptimizedTheta":3.192,"HistoricAverage":3.894,"Moirai":1.523,"Prophet":4.619,"SeasonalNaive":6.089,"TiRex":1.665,"TimesFM":1.348,"ZeroModel":1.0}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-01-18-00","values":{"AutoARIMA":4.323,"AutoCES":3.875,"AutoETS":4.226,"Chronos":2.657,"DynamicOptimizedTheta":4.167,"HistoricAverage":7.609,"Moirai":2.85,"Prophet":8.748,"SeasonalNaive":8.661,"TiRex":2.74,"TimesFM":1.68,"ZeroModel":1.0}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-01-25-00","values":{"AutoARIMA":3.502,"AutoCES":3.367,"AutoETS":3.531,"Chronos":17975981.194,"DynamicOptimizedTheta":3.499,"HistoricAverage":5.509,"Moirai":4604888855.044,"Prophet":3890664.177,"SeasonalNaive":7.865,"TiRex":41742912.988,"TimesFM":1.73,"ZeroModel":0.5}},{"subdataset":"prs_opened","frequency":"daily","cutoff":"2026-02-01-00","values":{"AutoARIMA":486134659439365.75,"AutoCES":484053064643106.06,"AutoETS":488509754229100.06,"Chronos":1333879641793.422,"DynamicOptimizedTheta":425730158030579.9,"HistoricAverage":499815610027576.94,"Moirai":2073749880832.0,"Prophet":497308738257531.44,"SeasonalNaive":1324981386710584.8,"TiRex":742172119677.156,"TimesFM":1829530538985.244,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-08-00","values":{"AutoARIMA":833373701896055.5,"AutoCES":830365188267850.0,"AutoETS":831583381054464.0,"Chronos":1540132024411.022,"DynamicOptimizedTheta":900300737691284.0,"HistoricAverage":845508651044044.9,"Moirai":2835779956098.844,"Prophet":848545977915483.4,"SeasonalNaive":1192627333007496.5,"TiRex":1093283884418.844,"TimesFM":1983780259976.533,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-09-00","values":{"AutoARIMA":2.253,"AutoCES":2.647,"AutoETS":2.354,"Chronos":142829613.511,"DynamicOptimizedTheta":2.448,"HistoricAverage":2.245,"Moirai":30988852109.2,"Prophet":27174884.988,"SeasonalNaive":3.112,"TiRex":418183507.453,"TimesFM":1.031,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-10-00","values":{"AutoARIMA":2.235,"AutoCES":2.397,"AutoETS":2.201,"Chronos":142829613.511,"DynamicOptimizedTheta":2.269,"HistoricAverage":2.15,"Moirai":30988852109.2,"Prophet":27225066.729,"SeasonalNaive":3.567,"TiRex":418183507.453,"TimesFM":1.035,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-11-00","values":{"AutoARIMA":2.211,"AutoCES":2.608,"AutoETS":2.228,"Chronos":142829613.511,"DynamicOptimizedTheta":2.371,"HistoricAverage":2.153,"Moirai":30988852109.2,"Prophet":27235351.555,"SeasonalNaive":3.016,"TiRex":418183284.694,"TimesFM":1.029,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"hourly","cutoff":"2026-02-12-00","values":{"AutoARIMA":147340803937530.3,"AutoCES":207505362989875.22,"AutoETS":150419048258309.7,"Chronos":462516527650.133,"DynamicOptimizedTheta":156408242975539.2,"HistoricAverage":150252941423411.2,"Moirai":815550291421.867,"Prophet":163841893482855.0,"SeasonalNaive":210828715010730.66,"TiRex":253407742452.622,"TimesFM":667245129819.022,"ZeroModel":0.0}},{"subdataset":"prs_opened","frequency":"monthly","cutoff":"2025-12-01-00","values":{"AutoARIMA":0.928,"AutoCES":1.106,"AutoETS":0.716,"Chronos":0.488,"DynamicOptimizedTheta":0.674,"HistoricAverage":1.339,"Moirai":0.482,"Prophet":1.152,"SeasonalNaive":1.748,"TiRex":0.507,"TimesFM":0.533,"ZeroModel":1.0}},{"subdataset":"prs_opened","frequency":"weekly","cutoff":"2026-01-04-00","values":{"AutoARIMA":2.063,"AutoCES":1.703,"AutoETS":1.881,"Chronos":1.547,"DynamicOptimizedTheta":1.65,"HistoricAverage":6.218,"Moirai":1.436,"Prophet":5.331,"SeasonalNaive":2.114,"TiRex":1.594,"TimesFM":0.966,"ZeroModel":1.0}},{"subdataset":"prs_opened","frequency":"weekly","cutoff":"2026-01-11-00","values":{"AutoARIMA":2.364,"AutoCES":2.112,"AutoETS":2.187,"Chronos":2.024,"DynamicOptimizedTheta":2.047,"HistoricAverage":5.612,"Moirai":1.656,"Prophet":5.015,"SeasonalNaive":2.332,"TiRex":1.799,"TimesFM":1.34,"ZeroModel":1.0}},{"subdataset":"prs_opened","frequency":"weekly","cutoff":"2026-01-18-00","values":{"AutoARIMA":3.414,"AutoCES":2.991,"AutoETS":3.394,"Chronos":3.524,"DynamicOptimizedTheta":3.071,"HistoricAverage":8.468,"Moirai":3.835,"Prophet":9.718,"SeasonalNaive":3.559,"TiRex":3.698,"TimesFM":2.028,"ZeroModel":1.0}},{"subdataset":"prs_opened","frequency":"weekly","cutoff":"2026-01-25-00","values":{"AutoARIMA":2.953,"AutoCES":2.676,"AutoETS":3.012,"Chronos":3250952.25,"DynamicOptimizedTheta":2.801,"HistoricAverage":6.934,"Moirai":567695878.883,"Prophet":538539.477,"SeasonalNaive":3.061,"TiRex":2473502.262,"TimesFM":2.075,"ZeroModel":0.5}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-01-04-00","values":{"AutoARIMA":2.784,"AutoCES":2.556,"AutoETS":2.871,"Chronos":1.369,"DynamicOptimizedTheta":2.814,"HistoricAverage":4.008,"Moirai":1.376,"Prophet":4.177,"SeasonalNaive":6.622,"TiRex":1.46,"TimesFM":1.075,"ZeroModel":1.0}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-01-11-00","values":{"AutoARIMA":2.862,"AutoCES":2.669,"AutoETS":2.806,"Chronos":1.444,"DynamicOptimizedTheta":3.088,"HistoricAverage":3.666,"Moirai":1.384,"Prophet":4.75,"SeasonalNaive":5.844,"TiRex":1.398,"TimesFM":1.172,"ZeroModel":1.0}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-01-18-00","values":{"AutoARIMA":4.538,"AutoCES":3.527,"AutoETS":4.99,"Chronos":17975980.521,"DynamicOptimizedTheta":4.872,"HistoricAverage":6.087,"Moirai":4604938900.034,"Prophet":3860796.921,"SeasonalNaive":8.36,"TiRex":41742912.419,"TimesFM":1.51,"ZeroModel":0.5}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-01-25-00","values":{"AutoARIMA":3.987,"AutoCES":3.381,"AutoETS":4.18,"Chronos":4.047,"DynamicOptimizedTheta":3.847,"HistoricAverage":4.845,"Moirai":2.911,"Prophet":8.629,"SeasonalNaive":7.988,"TiRex":4.264,"TimesFM":1.441,"ZeroModel":1.0}},{"subdataset":"pushes","frequency":"daily","cutoff":"2026-02-01-00","values":{"AutoARIMA":2.753,"AutoCES":2.626,"AutoETS":2.994,"Chronos":4.081,"DynamicOptimizedTheta":3.665,"HistoricAverage":3.673,"Moirai":2.649,"Prophet":7.989,"SeasonalNaive":6.801,"TiRex":3.947,"TimesFM":1.257,"ZeroModel":1.0}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-08-00","values":{"AutoARIMA":2.149,"AutoCES":2.311,"AutoETS":2.18,"Chronos":142829613.511,"DynamicOptimizedTheta":2.321,"HistoricAverage":2.07,"Moirai":30988852109.2,"Prophet":27201199.563,"SeasonalNaive":2.785,"TiRex":418183284.694,"TimesFM":1.013,"ZeroModel":0.0}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-09-00","values":{"AutoARIMA":1.494,"AutoCES":1.575,"AutoETS":1.508,"Chronos":142829613.511,"DynamicOptimizedTheta":1.597,"HistoricAverage":1.492,"Moirai":30988852109.2,"Prophet":26977049.604,"SeasonalNaive":1.793,"TiRex":418183507.453,"TimesFM":1.002,"ZeroModel":0.0}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-10-00","values":{"AutoARIMA":1.366,"AutoCES":1.491,"AutoETS":1.435,"Chronos":142829613.511,"DynamicOptimizedTheta":1.49,"HistoricAverage":1.378,"Moirai":30988852109.2,"Prophet":27010868.799,"SeasonalNaive":1.849,"TiRex":418183507.453,"TimesFM":1.002,"ZeroModel":0.0}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-11-00","values":{"AutoARIMA":1.415,"AutoCES":1.474,"AutoETS":1.416,"Chronos":142829613.511,"DynamicOptimizedTheta":1.479,"HistoricAverage":1.414,"Moirai":30988852109.2,"Prophet":27108055.862,"SeasonalNaive":1.788,"TiRex":418183284.694,"TimesFM":1.001,"ZeroModel":0.0}},{"subdataset":"pushes","frequency":"hourly","cutoff":"2026-02-12-00","values":{"AutoARIMA":165986663801378.12,"AutoCES":207294327096752.38,"AutoETS":165157793049986.88,"Chronos":452951463981.511,"DynamicOptimizedTheta":186192666062264.62,"HistoricAverage":167496609326694.38,"Moirai":809761417898.667,"Prophet":170107847087664.0,"SeasonalNaive":223271196120405.3,"TiRex":251940411801.6,"TimesFM":654227025282.844,"ZeroModel":0.0}},{"subdataset":"pushes","frequency":"monthly","cutoff":"2025-12-01-00","values":{"AutoARIMA":0.987,"AutoCES":1.313,"AutoETS":0.746,"Chronos":0.586,"DynamicOptimizedTheta":0.848,"HistoricAverage":1.488,"Moirai":0.639,"Prophet":1.313,"SeasonalNaive":2.6,"TiRex":0.605,"TimesFM":0.569,"ZeroModel":1.0}},{"subdataset":"pushes","frequency":"weekly","cutoff":"2026-01-04-00","values":{"AutoARIMA":2.263,"AutoCES":2.098,"AutoETS":2.237,"Chronos":1.543,"DynamicOptimizedTheta":2.083,"HistoricAverage":4.553,"Moirai":1.428,"Prophet":4.384,"SeasonalNaive":2.884,"TiRex":1.664,"TimesFM":1.339,"ZeroModel":1.0}},{"subdataset":"pushes","frequency":"weekly","cutoff":"2026-01-11-00","values":{"AutoARIMA":2.842,"AutoCES":2.568,"AutoETS":2.588,"Chronos":1.551,"DynamicOptimizedTheta":2.539,"HistoricAverage":4.227,"Moirai":1.615,"Prophet":5.437,"SeasonalNaive":3.649,"TiRex":1.561,"TimesFM":1.142,"ZeroModel":1.0}},{"subdataset":"pushes","frequency":"weekly","cutoff":"2026-01-18-00","values":{"AutoARIMA":5.626,"AutoCES":5.197,"AutoETS":5.002,"Chronos":3250953.008,"DynamicOptimizedTheta":5.592,"HistoricAverage":13.855,"Moirai":701755390.281,"Prophet":537602.602,"SeasonalNaive":5.834,"TiRex":2473509.719,"TimesFM":3.573,"ZeroModel":0.5}},{"subdataset":"pushes","frequency":"weekly","cutoff":"2026-01-25-00","values":{"AutoARIMA":5.268,"AutoCES":4.937,"AutoETS":5.715,"Chronos":6.036,"DynamicOptimizedTheta":5.82,"HistoricAverage":8.126,"Moirai":5.083,"Prophet":21.064,"SeasonalNaive":6.561,"TiRex":6.284,"TimesFM":3.303,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-01-04-00","values":{"AutoARIMA":1.074,"AutoCES":0.871,"AutoETS":1.252,"Chronos":0.36,"DynamicOptimizedTheta":1.272,"HistoricAverage":1.716,"Moirai":0.354,"Prophet":1.15,"SeasonalNaive":1.576,"TiRex":0.368,"TimesFM":0.357,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-01-11-00","values":{"AutoARIMA":1.157,"AutoCES":0.97,"AutoETS":1.331,"Chronos":0.372,"DynamicOptimizedTheta":1.363,"HistoricAverage":1.787,"Moirai":0.364,"Prophet":1.265,"SeasonalNaive":1.7,"TiRex":0.375,"TimesFM":0.361,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-01-18-00","values":{"AutoARIMA":1.273,"AutoCES":1.081,"AutoETS":1.547,"Chronos":0.38,"DynamicOptimizedTheta":1.533,"HistoricAverage":1.908,"Moirai":0.368,"Prophet":1.377,"SeasonalNaive":1.886,"TiRex":0.397,"TimesFM":0.372,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-01-25-00","values":{"AutoARIMA":1.379,"AutoCES":1.085,"AutoETS":1.543,"Chronos":0.38,"DynamicOptimizedTheta":1.568,"HistoricAverage":2.224,"Moirai":0.38,"Prophet":1.487,"SeasonalNaive":2.109,"TiRex":0.377,"TimesFM":0.376,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"daily","cutoff":"2026-02-01-00","values":{"AutoARIMA":1.435,"AutoCES":1.172,"AutoETS":1.608,"Chronos":0.435,"DynamicOptimizedTheta":1.592,"HistoricAverage":2.222,"Moirai":0.424,"Prophet":1.535,"SeasonalNaive":2.115,"TiRex":0.441,"TimesFM":0.43,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-08-00","values":{"AutoARIMA":1.372,"AutoCES":1.458,"AutoETS":1.368,"Chronos":0.985,"DynamicOptimizedTheta":1.413,"HistoricAverage":1.374,"Moirai":0.972,"Prophet":1.391,"SeasonalNaive":1.858,"TiRex":0.959,"TimesFM":1.001,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-09-00","values":{"AutoARIMA":1.446,"AutoCES":1.516,"AutoETS":1.489,"Chronos":0.996,"DynamicOptimizedTheta":1.509,"HistoricAverage":1.457,"Moirai":0.996,"Prophet":1.506,"SeasonalNaive":2.031,"TiRex":0.989,"TimesFM":1.01,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-10-00","values":{"AutoARIMA":1.495,"AutoCES":1.586,"AutoETS":1.473,"Chronos":0.996,"DynamicOptimizedTheta":1.503,"HistoricAverage":1.516,"Moirai":0.995,"Prophet":1.462,"SeasonalNaive":1.978,"TiRex":0.98,"TimesFM":1.004,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-11-00","values":{"AutoARIMA":1.555,"AutoCES":1.672,"AutoETS":1.558,"Chronos":1.002,"DynamicOptimizedTheta":1.617,"HistoricAverage":1.614,"Moirai":1.002,"Prophet":1.596,"SeasonalNaive":2.09,"TiRex":0.999,"TimesFM":1.01,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"hourly","cutoff":"2026-02-12-00","values":{"AutoARIMA":1.091,"AutoCES":1.421,"AutoETS":1.249,"Chronos":1.0,"DynamicOptimizedTheta":1.16,"HistoricAverage":1.18,"Moirai":1.0,"Prophet":1.219,"SeasonalNaive":2.491,"TiRex":1.001,"TimesFM":0.998,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"monthly","cutoff":"2025-12-01-00","values":{"AutoARIMA":0.897,"AutoCES":1.09,"AutoETS":0.353,"Chronos":0.324,"DynamicOptimizedTheta":0.622,"HistoricAverage":1.658,"Moirai":0.281,"Prophet":1.083,"SeasonalNaive":1.922,"TiRex":0.289,"TimesFM":0.305,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"weekly","cutoff":"2026-01-04-00","values":{"AutoARIMA":0.896,"AutoCES":0.893,"AutoETS":0.34,"Chronos":0.212,"DynamicOptimizedTheta":0.788,"HistoricAverage":1.68,"Moirai":0.191,"Prophet":1.308,"SeasonalNaive":1.028,"TiRex":0.206,"TimesFM":0.2,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"weekly","cutoff":"2026-01-11-00","values":{"AutoARIMA":0.957,"AutoCES":0.938,"AutoETS":0.383,"Chronos":0.22,"DynamicOptimizedTheta":0.879,"HistoricAverage":1.826,"Moirai":0.2,"Prophet":1.284,"SeasonalNaive":1.023,"TiRex":0.204,"TimesFM":0.213,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"weekly","cutoff":"2026-01-18-00","values":{"AutoARIMA":1.096,"AutoCES":1.061,"AutoETS":0.388,"Chronos":0.237,"DynamicOptimizedTheta":0.985,"HistoricAverage":1.964,"Moirai":0.211,"Prophet":1.431,"SeasonalNaive":1.167,"TiRex":0.231,"TimesFM":0.238,"ZeroModel":1.0}},{"subdataset":"stars","frequency":"weekly","cutoff":"2026-01-25-00","values":{"AutoARIMA":1.125,"AutoCES":1.079,"AutoETS":0.401,"Chronos":0.227,"DynamicOptimizedTheta":1.033,"HistoricAverage":2.186,"Moirai":0.223,"Prophet":1.554,"SeasonalNaive":1.237,"TiRex":0.228,"TimesFM":0.234,"ZeroModel":1.0}}],"summary":[{"model":"\ud83e\udd47 TimesFM","avg_mase":0.165,"avg_crps":549775344879.077,"rank_mase":3.433,"rank_crps":2.75},{"model":"\ud83e\udd48 ZeroModel","avg_mase":0.218,"avg_crps":0.55,"rank_mase":3.733,"rank_crps":2.5},{"model":"\ud83e\udd49 TiRex","avg_mase":0.231,"avg_crps":229721540323.396,"rank_mase":3.783,"rank_crps":5.25},{"model":"Moirai","avg_mase":0.232,"avg_crps":572337567055.556,"rank_mase":4.033,"rank_crps":5.517},{"model":"Chronos","avg_mase":0.233,"avg_crps":401957352400.336,"rank_mase":4.283,"rank_crps":5.317},{"model":"DynamicOptimizedTheta","avg_mase":0.34,"avg_crps":135127791293065.56,"rank_mase":6.733,"rank_crps":7.217},{"model":"AutoETS","avg_mase":0.446,"avg_crps":132142654693781.2,"rank_mase":8.117,"rank_crps":6.867},{"model":"SeasonalNaive","avg_mase":0.311,"avg_crps":241051093704282.16,"rank_mase":4.683,"rank_crps":10.367},{"model":"AutoCES","avg_mase":0.484,"avg_crps":154235596324460.6,"rank_mase":8.217,"rank_crps":7.1},{"model":"AutoARIMA","avg_mase":0.485,"avg_crps":130336048551884.44,"rank_mase":8.833,"rank_crps":6.55},{"model":"HistoricAverage","avg_mase":0.893,"avg_crps":134367432898038.05,"rank_mase":11.15,"rank_crps":8.917},{"model":"Prophet","avg_mase":0.78,"avg_crps":134833026571534.58,"rank_mase":11.0,"rank_crps":9.65}]};

const CHART_COLORS = [
  '#7C4DFF', // violet
  '#E040FB', // magenta
  '#1B5E20', // forest green
  '#FF6D00', // vivid orange
  '#D32F6B', // rose
  '#00897B', // teal
  '#4527A0', // deep purple
  '#F9A825', // amber
  '#0277BD', // blue
  '#6D4C41', // brown
  '#B388FF', // light violet
  '#E65100'  // burnt orange
];
function getColor(i) { return CHART_COLORS[i % CHART_COLORS.length]; }

// ===========================================================================
// STATE
// ===========================================================================
let state = {
  metric: 'mase',
  view: 'rank',
  subdataset: 'all',
  frequency: 'all',
  sortCol: null,
  sortDir: 'asc'
};

// ===========================================================================
// SUMMARY CARDS
// ===========================================================================
function renderSummaryCards() {
  const medals = ['🥇', '🥈', '🥉'];
  const top3 = DATA.summary.slice(0, 3);
  const html = top3.map((m, i) => {
    const name = m.model.replace(/^[🥇🥈🥉]\s*/, '');
    return `
    <div class="summary-card">
      <div class="medal">${medals[i]}</div>
      <div class="model-name">${name}</div>
      <div class="metrics">
        <div class="metric-box">
          <div class="metric-label">Avg MASE</div>
          <div class="metric-value">${m.avg_mase.toFixed(3)}</div>
        </div>
        <div class="metric-box">
          <div class="metric-label">Avg CRPS</div>
          <div class="metric-value">${m.avg_crps.toFixed(3)}</div>
        </div>
      </div>
    </div>`;
  }).join('');
  document.getElementById('summaryCards').innerHTML = html;
}

// ===========================================================================
// CHART COMPUTATION
// ===========================================================================
function filterData(metricKey) {
  const src = metricKey === 'mase' ? DATA.mase : DATA.crps;
  return src.filter(r => {
    if (state.subdataset !== 'all' && r.subdataset !== state.subdataset) return false;
    if (state.frequency !== 'all' && r.frequency !== state.frequency) return false;
    return true;
  });
}

function computeRankOverTime(rows) {
  // Group by cutoff → within each (subdataset, frequency, cutoff), rank models
  // Then average ranks across groups per (model, cutoff)
  const grouped = {};
  rows.forEach(r => {
    const key = r.cutoff;
    if (!grouped[key]) grouped[key] = [];
    grouped[key].push(r);
  });

  const result = {}; // model → [{cutoff, rank}]
  DATA.models.forEach(m => { result[m] = {}; });

  Object.keys(grouped).forEach(cutoff => {
    const groupRows = grouped[cutoff];
    // For each row (subdataset+frequency combo), rank models
    const rankAccum = {};
    const rankCount = {};
    DATA.models.forEach(m => { rankAccum[m] = 0; rankCount[m] = 0; });

    groupRows.forEach(row => {
      const vals = DATA.models.map(m => ({ model: m, val: row.values[m] }))
        .filter(x => x.val !== null && x.val !== undefined);
      // Sort ascending (lower is better)
      vals.sort((a, b) => a.val - b.val);
      // Assign ranks (1-based, no ties handling for simplicity)
      vals.forEach((x, idx) => {
        rankAccum[x.model] += (idx + 1);
        rankCount[x.model] += 1;
      });
    });

    DATA.models.forEach(m => {
      if (rankCount[m] > 0) {
        result[m][cutoff] = rankAccum[m] / rankCount[m];
      }
    });
  });

  return result;
}

function computeRawOverTime(rows) {
  // Average raw values across (subdataset, frequency) for each (model, cutoff)
  const grouped = {};
  rows.forEach(r => {
    const key = r.cutoff;
    if (!grouped[key]) grouped[key] = [];
    grouped[key].push(r);
  });

  const result = {};
  DATA.models.forEach(m => { result[m] = {}; });

  Object.keys(grouped).forEach(cutoff => {
    const groupRows = grouped[cutoff];
    const sum = {};
    const count = {};
    DATA.models.forEach(m => { sum[m] = 0; count[m] = 0; });

    groupRows.forEach(row => {
      DATA.models.forEach(m => {
        const v = row.values[m];
        if (v !== null && v !== undefined) {
          sum[m] += v;
          count[m] += 1;
        }
      });
    });

    DATA.models.forEach(m => {
      if (count[m] > 0) {
        result[m][cutoff] = sum[m] / count[m];
      }
    });
  });

  return result;
}

// For CRPS raw values, cap at 95th percentile to handle outliers
function capValues(modelData, useLog) {
  // Collect all values
  const allVals = [];
  Object.values(modelData).forEach(cutoffMap => {
    Object.values(cutoffMap).forEach(v => {
      if (v !== undefined && v > 0) allVals.push(v);
    });
  });
  allVals.sort((a, b) => a - b);
  const p95 = allVals[Math.floor(allVals.length * 0.95)] || Infinity;
  const cap = Math.max(p95 * 1.1, 10); // At least 10

  const capped = {};
  Object.keys(modelData).forEach(m => {
    capped[m] = {};
    Object.keys(modelData[m]).forEach(cutoff => {
      const v = modelData[m][cutoff];
      capped[m][cutoff] = Math.min(v, cap);
    });
  });
  return { data: capped, cap };
}

// ===========================================================================
// CHART RENDERING
// ===========================================================================
let chartInstance = null;

function formatCutoff(c) {
  // "2026-01-04-00" → "Jan 4"
  const parts = c.split('-');
  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  return months[parseInt(parts[1])-1] + ' ' + parseInt(parts[2]);
}

function renderChart() {
  const rows = filterData(state.metric);
  
  // Get cutoffs that appear in filtered data
  const cutoffSet = new Set(rows.map(r => r.cutoff));
  const cutoffs = DATA.cutoffs.filter(c => cutoffSet.has(c));

  let modelData;
  let isRank = state.view === 'rank';
  let yLabel, noteText;
  let reverseY = false;
  let cappedInfo = null;

  if (isRank) {
    modelData = computeRankOverTime(rows);
    yLabel = 'Average Rank';
    noteText = 'Lower rank is better (1 = best). Click legend items to show/hide models.';
    reverseY = true;
  } else {
    modelData = computeRawOverTime(rows);
    yLabel = state.metric === 'mase' ? 'Average MASE' : 'Average SCALED_CRPS';
    
    // For CRPS, check if values are extreme
    if (state.metric === 'crps') {
      const allVals = [];
      Object.values(modelData).forEach(m => Object.values(m).forEach(v => { if (v > 0) allVals.push(v); }));
      const maxVal = Math.max(...allVals);
      if (maxVal > 100) {
        cappedInfo = capValues(modelData, false);
        modelData = cappedInfo.data;
        noteText = `Values capped at ~${cappedInfo.cap.toExponential(1)} (95th percentile) to handle outliers. Click legend to toggle models.`;
      } else {
        noteText = 'Lower is better. Click legend items to show/hide models.';
      }
    } else {
      noteText = 'Lower is better. Click legend items to show/hide models.';
    }
  }

  const datasets = DATA.models.map((m, i) => {
    const color = getColor(i);
    const points = cutoffs.map(c => modelData[m][c] !== undefined ? modelData[m][c] : null);
    return {
      label: m,
      data: points,
      borderColor: color,
      backgroundColor: color,
      borderWidth: 2,
      pointRadius: 3,
      pointHoverRadius: 6,
      pointBackgroundColor: color,
      tension: 0.3,
      spanGaps: true,
      hidden: false
    };
  });

  const labels = cutoffs.map(formatCutoff);

  const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
  const gridColor = isDark ? 'rgba(206,190,255,0.08)' : 'rgba(88,50,168,0.06)';
  const textColor = isDark ? '#CEBEFF' : '#4A3D6B';

  if (chartInstance) chartInstance.destroy();

  const ctx = document.getElementById('mainChart').getContext('2d');
  chartInstance = new Chart(ctx, {
    type: 'line',
    data: { labels, datasets },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: {
        mode: 'index',
        intersect: false
      },
      plugins: {
        legend: {
          position: 'bottom',
          labels: {
            color: textColor,
            font: { family: "'Inter', sans-serif", size: 12, weight: '500' },
            usePointStyle: true,
            pointStyle: 'circle',
            padding: 16,
            boxWidth: 8,
            boxHeight: 8
          }
        },
        tooltip: {
          backgroundColor: isDark ? '#231A40' : '#FFFFFF',
          titleColor: isDark ? '#E8E0F7' : '#1E1333',
          bodyColor: isDark ? '#CEBEFF' : '#4A3D6B',
          borderColor: isDark ? 'rgba(206,190,255,0.15)' : 'rgba(88,50,168,0.12)',
          borderWidth: 1,
          titleFont: { family: "'Inter', sans-serif", size: 13, weight: '600' },
          bodyFont: { family: "'Inter', sans-serif", size: 12 },
          padding: 12,
          cornerRadius: 8,
          boxPadding: 4,
          callbacks: {
            label: function(ctx) {
              const val = ctx.parsed.y;
              if (val === null || val === undefined) return ctx.dataset.label + ': N/A';
              return ctx.dataset.label + ': ' + (isRank ? val.toFixed(2) : val.toFixed(3));
            }
          }
        }
      },
      scales: {
        x: {
          grid: { color: gridColor, drawBorder: false },
          ticks: {
            color: textColor,
            font: { family: "'Inter', sans-serif", size: 11 },
            maxRotation: 45
          }
        },
        y: {
          reverse: reverseY,
          grid: { color: gridColor, drawBorder: false },
          ticks: {
            color: textColor,
            font: { family: "'Inter', sans-serif", size: 11 },
            callback: function(v) {
              if (isRank) return v;
              if (v >= 1000) return v.toExponential(0);
              return v.toFixed(v < 1 ? 2 : 1);
            }
          },
          title: {
            display: true,
            text: yLabel,
            color: textColor,
            font: { family: "'Inter', sans-serif", size: 12, weight: '600' }
          }
        }
      }
    }
  });

  document.getElementById('chartNote').textContent = noteText;
}

// ===========================================================================
// TABLE RENDERING
// ===========================================================================
function renderTable() {
  const rows = filterData(state.metric);
  if (rows.length === 0) {
    document.getElementById('tableHead').innerHTML = '<tr><th>No data</th></tr>';
    document.getElementById('tableBody').innerHTML = '';
    return;
  }

  // Find the latest cutoff per (subdataset, frequency) and show all
  const cutoffs = [...new Set(rows.map(r => r.cutoff))].sort();
  const latestCutoff = cutoffs[cutoffs.length - 1];
  const latestRows = rows.filter(r => r.cutoff === latestCutoff);

  // Build header
  let headHtml = '<tr><th>Dataset / Freq</th>';
  DATA.models.forEach((m, i) => {
    const arrow = state.sortCol === m ? (state.sortDir === 'asc' ? '▲' : '▼') : '▲';
    const sorted = state.sortCol === m ? ' sorted' : '';
    headHtml += `<th class="${sorted}" data-model="${m}">${m} <span class="sort-arrow">${arrow}</span></th>`;
  });
  headHtml += '</tr>';
  document.getElementById('tableHead').innerHTML = headHtml;

  // Compute display rows
  let displayRows = latestRows.map(r => {
    const label = r.subdataset + ' / ' + r.frequency;
    const vals = {};
    DATA.models.forEach(m => { vals[m] = r.values[m]; });
    return { label, vals };
  });

  // Sort
  if (state.sortCol) {
    displayRows.sort((a, b) => {
      const va = a.vals[state.sortCol];
      const vb = b.vals[state.sortCol];
      if (va === null) return 1;
      if (vb === null) return -1;
      return state.sortDir === 'asc' ? va - vb : vb - va;
    });
  }

  // Render rows
  let bodyHtml = '';
  displayRows.forEach(r => {
    // Find best (lowest non-null) value
    const numVals = DATA.models.map(m => r.vals[m]).filter(v => v !== null && v !== undefined);
    const bestVal = Math.min(...numVals);

    bodyHtml += '<tr>';
    bodyHtml += `<td>${r.label}</td>`;
    DATA.models.forEach(m => {
      const v = r.vals[m];
      let cls = '';
      if (v !== null && v !== undefined && v === bestVal) cls = ' class="best-value"';
      bodyHtml += `<td${cls}>${v !== null && v !== undefined ? (v >= 1e6 ? v.toExponential(1) : v < 0.001 ? v.toExponential(2) : v.toFixed(3)) : '—'}</td>`;
    });
    bodyHtml += '</tr>';
  });
  document.getElementById('tableBody').innerHTML = bodyHtml;

  // Attach sort handlers
  document.querySelectorAll('#tableHead th[data-model]').forEach(th => {
    th.addEventListener('click', () => {
      const m = th.getAttribute('data-model');
      if (state.sortCol === m) {
        state.sortDir = state.sortDir === 'asc' ? 'desc' : 'asc';
      } else {
        state.sortCol = m;
        state.sortDir = 'asc';
      }
      renderTable();
    });
  });
}

// ===========================================================================
// CHAMPIONSHIP POINTS CHART
// ===========================================================================
let champChartInstance = null;
let champMetric = 'mase';

function computeChampionshipPoints(metricKey) {
  const src = metricKey === 'mase' ? DATA.mase : DATA.crps;
  const nModels = DATA.models.length;

  // Group all rows by cutoff
  const byCutoff = {};
  src.forEach(r => {
    if (!byCutoff[r.cutoff]) byCutoff[r.cutoff] = [];
    byCutoff[r.cutoff].push(r);
  });

  // For each cutoff, compute average rank across all (subdataset, frequency) groups
  const cutoffs = DATA.cutoffs.filter(c => byCutoff[c]);
  // weeklyPoints: model → [points per cutoff]
  const cumPoints = {};
  DATA.models.forEach(m => { cumPoints[m] = []; });

  let running = {};
  DATA.models.forEach(m => { running[m] = 0; });

  cutoffs.forEach(cutoff => {
    const groupRows = byCutoff[cutoff];
    // Compute avg rank for this cutoff
    const rankAccum = {};
    const rankCount = {};
    DATA.models.forEach(m => { rankAccum[m] = 0; rankCount[m] = 0; });

    groupRows.forEach(row => {
      const vals = DATA.models.map(m => ({ model: m, val: row.values[m] }))
        .filter(x => x.val !== null && x.val !== undefined);
      vals.sort((a, b) => a.val - b.val);
      vals.forEach((x, idx) => {
        rankAccum[x.model] += (idx + 1);
        rankCount[x.model] += 1;
      });
    });

    // Average rank → points = nModels + 1 - avgRank
    const avgRanks = {};
    DATA.models.forEach(m => {
      avgRanks[m] = rankCount[m] > 0 ? rankAccum[m] / rankCount[m] : nModels;
    });

    // Re-rank the average ranks to assign clean 1-12 positions
    const sorted = DATA.models.slice().sort((a, b) => avgRanks[a] - avgRanks[b]);
    sorted.forEach((m, idx) => {
      const pts = nModels - idx; // 12 for 1st, 11 for 2nd, etc.
      running[m] += pts;
      cumPoints[m].push(running[m]);
    });
  });

  return { cutoffs, cumPoints };
}

function renderChampChart() {
  const { cutoffs, cumPoints } = computeChampionshipPoints(champMetric);
  const labels = cutoffs.map(formatCutoff);

  // Sort models by final points (descending) for legend order
  const finalPoints = {};
  DATA.models.forEach(m => {
    const pts = cumPoints[m];
    finalPoints[m] = pts[pts.length - 1] || 0;
  });
  const sortedModels = DATA.models.slice().sort((a, b) => finalPoints[b] - finalPoints[a]);

  const datasets = sortedModels.map((m, i) => {
    const origIdx = DATA.models.indexOf(m);
    const color = getColor(origIdx);
    return {
      label: `${m} (${finalPoints[m]} pts)`,
      data: cumPoints[m],
      borderColor: color,
      backgroundColor: color,
      borderWidth: 2.5,
      pointRadius: 3,
      pointHoverRadius: 6,
      pointBackgroundColor: color,
      tension: 0.3,
      spanGaps: true
    };
  });

  const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
  const gridColor = isDark ? 'rgba(206,190,255,0.08)' : 'rgba(88,50,168,0.06)';
  const textColor = isDark ? '#CEBEFF' : '#4A3D6B';

  if (champChartInstance) champChartInstance.destroy();

  const ctx = document.getElementById('champChart').getContext('2d');
  champChartInstance = new Chart(ctx, {
    type: 'line',
    data: { labels, datasets },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: { mode: 'index', intersect: false },
      plugins: {
        legend: {
          position: 'bottom',
          labels: {
            color: textColor,
            font: { family: "'Inter', sans-serif", size: 12, weight: '500' },
            usePointStyle: true, pointStyle: 'circle',
            padding: 16, boxWidth: 8, boxHeight: 8
          }
        },
        tooltip: {
          backgroundColor: isDark ? '#231A40' : '#FFFFFF',
          titleColor: isDark ? '#E8E0F7' : '#1E1333',
          bodyColor: isDark ? '#CEBEFF' : '#4A3D6B',
          borderColor: isDark ? 'rgba(206,190,255,0.15)' : 'rgba(88,50,168,0.12)',
          borderWidth: 1,
          titleFont: { family: "'Inter', sans-serif", size: 13, weight: '600' },
          bodyFont: { family: "'Inter', sans-serif", size: 12 },
          padding: 12, cornerRadius: 8, boxPadding: 4
        }
      },
      scales: {
        x: {
          grid: { color: gridColor, drawBorder: false },
          ticks: { color: textColor, font: { family: "'Inter', sans-serif", size: 11 }, maxRotation: 45 }
        },
        y: {
          grid: { color: gridColor, drawBorder: false },
          ticks: { color: textColor, font: { family: "'Inter', sans-serif", size: 11 } },
          title: {
            display: true, text: 'Cumulative Points',
            color: textColor, font: { family: "'Inter', sans-serif", size: 12, weight: '600' }
          }
        }
      }
    }
  });
}

// ===========================================================================
// CHAMPIONSHIP STANDINGS TABLE
// ===========================================================================
function renderChampStandings() {
  const { cutoffs, cumPoints } = computeChampionshipPoints(champMetric);
  const nModels = DATA.models.length;
  const nCutoffs = cutoffs.length;

  // Compute per-model stats
  const stats = DATA.models.map(m => {
    const pts = cumPoints[m];
    const totalPts = pts[nCutoffs - 1] || 0;
    // Per-week points (not cumulative)
    const weeklyPts = pts.map((p, i) => i === 0 ? p : p - pts[i - 1]);
    const bestWeek = Math.max(...weeklyPts);
    const worstWeek = Math.min(...weeklyPts);
    // Average rank: points per week = nModels + 1 - rank, so rank = nModels + 1 - avgPtsPerWeek
    const avgPtsPerWeek = totalPts / nCutoffs;
    const avgRank = nModels + 1 - avgPtsPerWeek;
    return { model: m, totalPts, avgRank, bestWeek, worstWeek };
  });

  // Sort by total points descending
  stats.sort((a, b) => b.totalPts - a.totalPts);
  const maxPts = stats[0].totalPts || 1;

  let html = '';
  stats.forEach((s, i) => {
    const rank = i + 1;
    const rankClass = rank <= 3 ? ` rank-${rank}` : '';
    const pct = (s.totalPts / maxPts * 100).toFixed(1);
    const origIdx = DATA.models.indexOf(s.model);
    const barColor = getColor(origIdx);

    html += `<tr>
      <td class="${rankClass}"><span class="rank-medal">${rank}</span></td>
      <td>${s.model}</td>
      <td>${s.totalPts}</td>
      <td>${s.avgRank.toFixed(1)}</td>
      <td>${s.bestWeek}</td>
      <td>${s.worstWeek}</td>
      <td class="pts-bar-cell">
        <div class="pts-bar-wrapper">
          <div class="pts-bar-track"><div class="pts-bar-fill" style="width:${pct}%;background:${barColor}"></div></div>
          <span class="pts-bar-value">${s.totalPts}</span>
        </div>
      </td>
    </tr>`;
  });

  document.getElementById('standingsBody').innerHTML = html;
}

// ===========================================================================
// RANK HEATMAP
// ===========================================================================
let heatmapMetric = 'mase';

function heatmapColor(rank, nModels) {
  // rank goes from 1 (best) to nModels (worst)
  // Map to a violet gradient: rank 1 → deep violet, rank nModels → warm rose
  const t = (rank - 1) / (nModels - 1); // 0 = best, 1 = worst
  // Color stops: #4527A0 (best) → #7C4DFF → #D1B3FF → #FF8A65 → #D32F6B (worst)
  const stops = [
    { r: 69, g: 39, b: 160 },     // #4527A0
    { r: 124, g: 77, b: 255 },    // #7C4DFF
    { r: 209, g: 179, b: 255 },   // #D1B3FF
    { r: 255, g: 138, b: 101 },   // #FF8A65
    { r: 211, g: 47, b: 107 }     // #D32F6B
  ];
  const segment = t * (stops.length - 1);
  const idx = Math.min(Math.floor(segment), stops.length - 2);
  const localT = segment - idx;
  const c1 = stops[idx], c2 = stops[idx + 1];
  const r = Math.round(c1.r + (c2.r - c1.r) * localT);
  const g = Math.round(c1.g + (c2.g - c1.g) * localT);
  const b = Math.round(c1.b + (c2.b - c1.b) * localT);
  return `rgb(${r},${g},${b})`;
}

function textColorForBg(rank, nModels) {
  const t = (rank - 1) / (nModels - 1);
  // White text for dark cells (first ~35% and last ~20%), dark text for light cells (middle)
  return t < 0.35 || t > 0.80 ? '#ffffff' : '#1E1333';
}

function renderHeatmap() {
  const src = heatmapMetric === 'mase' ? DATA.mase : DATA.crps;
  const nModels = DATA.models.length;

  // Group by cutoff
  const byCutoff = {};
  src.forEach(r => {
    if (!byCutoff[r.cutoff]) byCutoff[r.cutoff] = [];
    byCutoff[r.cutoff].push(r);
  });
  const cutoffs = DATA.cutoffs.filter(c => byCutoff[c]);

  // Compute avg rank per model per cutoff
  const avgRanks = {}; // model → {cutoff → avgRank}
  DATA.models.forEach(m => { avgRanks[m] = {}; });

  cutoffs.forEach(cutoff => {
    const groupRows = byCutoff[cutoff];
    const rankAccum = {};
    const rankCount = {};
    DATA.models.forEach(m => { rankAccum[m] = 0; rankCount[m] = 0; });

    groupRows.forEach(row => {
      const vals = DATA.models.map(m => ({ model: m, val: row.values[m] }))
        .filter(x => x.val !== null && x.val !== undefined);
      vals.sort((a, b) => a.val - b.val);
      vals.forEach((x, idx) => {
        rankAccum[x.model] += (idx + 1);
        rankCount[x.model] += 1;
      });
    });

    DATA.models.forEach(m => {
      avgRanks[m][cutoff] = rankCount[m] > 0 ? rankAccum[m] / rankCount[m] : null;
    });
  });

  // Sort models by their overall average rank (best first)
  const overallAvg = {};
  DATA.models.forEach(m => {
    const vals = cutoffs.map(c => avgRanks[m][c]).filter(v => v !== null);
    overallAvg[m] = vals.length > 0 ? vals.reduce((a, b) => a + b, 0) / vals.length : 99;
  });
  const sortedModels = DATA.models.slice().sort((a, b) => overallAvg[a] - overallAvg[b]);

  // Build HTML table
  let html = '<thead><tr><th>Model</th>';
  cutoffs.forEach(c => { html += `<th>${formatCutoff(c)}</th>`; });
  html += '<th>Avg</th></tr></thead><tbody>';

  sortedModels.forEach(m => {
    html += `<tr><td>${m}</td>`;
    cutoffs.forEach(c => {
      const rank = avgRanks[m][c];
      if (rank !== null) {
        const bg = heatmapColor(rank, nModels);
        const fg = textColorForBg(rank, nModels);
        html += `<td class="model-rank-cell" style="background:${bg};color:${fg}">${rank.toFixed(1)}</td>`;
      } else {
        html += '<td style="color:var(--color-text-faint)">—</td>';
      }
    });
    // Overall avg column
    const avg = overallAvg[m];
    const bg = heatmapColor(avg, nModels);
    const fg = textColorForBg(avg, nModels);
    html += `<td class="model-rank-cell" style="background:${bg};color:${fg};font-weight:700">${avg.toFixed(1)}</td>`;
    html += '</tr>';
  });
  html += '</tbody>';

  document.getElementById('heatmapTable').innerHTML = html;
}

// ===========================================================================
// CONTROLS
// ===========================================================================
function setupPillGroup(groupId, stateKey, callback) {
  document.getElementById(groupId).addEventListener('click', e => {
    const pill = e.target.closest('.pill');
    if (!pill) return;
    document.querySelectorAll(`#${groupId} .pill`).forEach(p => p.classList.remove('active'));
    pill.classList.add('active');
    const val = pill.getAttribute('data-value');
    if (callback) {
      callback(val);
    } else {
      state[stateKey] = val;
      renderChart();
      renderTable();
    }
  });
}

function setupSelect(selectId, stateKey) {
  document.getElementById(selectId).addEventListener('change', e => {
    state[stateKey] = e.target.value;
    renderChart();
    renderTable();
  });
}

// ===========================================================================
// THEME TOGGLE
// ===========================================================================
(function() {
  const toggle = document.querySelector('[data-theme-toggle]');
  const root = document.documentElement;
  let theme = root.getAttribute('data-theme') || 'light';

  function updateIcon() {
    toggle.innerHTML = theme === 'dark'
      ? '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>'
      : '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>';
  }

  if (toggle) {
    toggle.addEventListener('click', () => {
      theme = theme === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', theme);
      updateIcon();
      // Re-render all charts with updated colors
      renderChart();
      renderChampChart();
      renderChampStandings();
      renderHeatmap();
    });
  }
})();

// ===========================================================================
// INIT
// ===========================================================================
function init() {
  // Set last updated date from the latest cutoff in the data
  if (DATA.cutoffs && DATA.cutoffs.length > 0) {
    const latestCutoff = DATA.cutoffs[DATA.cutoffs.length - 1];
    // Format "2026-02-12-00" → "Feb 12, 2026"
    const parts = latestCutoff.split('-');
    const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
    const formatted = months[parseInt(parts[1])-1] + ' ' + parseInt(parts[2]) + ', ' + parts[0];
    document.getElementById('lastUpdated').textContent = formatted;
  }

  renderSummaryCards();
  setupPillGroup('metricToggle', 'metric');
  setupPillGroup('viewToggle', 'view');
  setupSelect('subdatasetFilter', 'subdataset');
  setupSelect('frequencyFilter', 'frequency');
  renderChart();
  renderTable();

  // Championship Points metric toggle
  setupPillGroup('champMetricToggle', null, function(val) {
    champMetric = val;
    renderChampChart();
    renderChampStandings();
  });
  renderChampChart();
  renderChampStandings();

  // Heatmap metric toggle
  setupPillGroup('heatmapMetricToggle', null, function(val) {
    heatmapMetric = val;
    renderHeatmap();
  });
  renderHeatmap();
}

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
